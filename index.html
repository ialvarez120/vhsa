<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Vhsa</title>
        <link rel="stylesheet" href="themes/vhsa.min.css" />
    <link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile.structure-1.4.2.min.css" />
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>

<script type="text/javascript" charset="utf-8">
    //*********************************************************    
    // initialize the environment
    //********************************************************* 
function onConfirm(buttonIndex) {
  if(buttonIndex == 1) {
    // User wants to make a photo using the camera
    sourceType = Camera.PictureSourceType.CAMERA;
    captureImage();
  } else if (buttonIndex == 2) {
    // User wants to select a photo from the gallery
    sourceType = Camera.PictureSourceType.PHOTOLIBRARY;
  } else {
    // cancelled
  }
}

function captureImage() {
  navigator.camera.getPicture(
    onSuccess,
    onFail,
    { quality:60,
      allowEdit:true, // ignored by Android
      destinationType:Camera.DestinationType.DATA_URL, //base64
      encodingType:Camera.EncodingType.JPEG,
      sourceType:sourceType,
      targetWidth:160,
      targetHeight:160
    }
  );
}


function onSuccess(imageData) {
  var theImage = "data:image/jpeg;base64,"+imageData;
 
  // immediately change the image in the view
  clickedImage.src = theImage;
 
  // And now upload the photo to the server
}

function onSuccess(imageData) {
  var theImage = "data:image/jpeg;base64,"+imageData;
 
  // immediately change the image in the view
  clickedImage.src = theImage;
 
  $.mobile.loading('show'); // Show the spinner
  doPost(
    '/user/uploadphoto',
    {
       'personid': getUser().personID,
       'photo': imageData
    },
    function(data) {
      if (data.success) {
        alert('Saving photo succeeded');
      } else {
        alert('Saving photo failed');
      }
      $.mobile.loading('hide'); // Hide the spinner
    }
  );
}

    </script>

    </head>
    <body>
         <div data-role="page"  data-theme="a" data-content-theme="b" id="inicio" style="width:100%; height:100%;">
<div data-role="header" data-theme="a" class="encab" >
                <div class="logo"><p style="text-align:center"><img src="img/logo.png" width="200" /></p></div>
            </div>
  <div data-role="content" data-theme="a" >
<br/>
<div id="center">
<ul data-role="listview" data-divider-theme="b"  >
<li class="btn_inicio"><a href="#automatica" >Tomar Foto</a></li>
<li class="btn_contacto"><a href="#manual">Manual</a></li>

</ul>
</div>
    </div>
</div>
<!-- subpaginas -->

          
            
<!-- captura Manual -->


<div data-role="page" id="manual" data-title="manual" data-theme="b">
            <div data-role="header" data-theme="b" >
<h1>Manual</h1>
<a href="index.html"  class="ui-btn-right flecha">Inicio</a>
</div>
    </div>
        </div>
            <div data-role="content" data-theme="b">
               
              
            </div>
           
        </div>

<!-- Automatica -->
<div data-role="page" id="automatica" data-title="manual" data-theme="b">

    <div data-role="header">
        <h1>Tomar Foto</h1>
        <a href="index.html"  class="ui-btn-right flecha">Inicio</a>
    </div><!-- /header -->

    <div role="main" class="ui-content">
       <ul data-role="listview" data-inset="true">
                <li><a href="#" id="capturePhoneButton" onclick="captureImage()">Capture Photo</a></li>
                <li><a href="#" id="fromPhotoLibraryButton">From Photo Library</a></li>
            </ul>

<div data-role="popup" id="popupPhoto" class="ui-content" data-theme="e" data-corners="false">
                <h5 class="hlabel">Image URI</h5>
                <p id="pictBox" class="content mesgBox"></p>
                <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                <img class="popphoto" id="popImage" src="">
            </div>

    </div><!-- /content -->

    <div data-role="footer">
        <div id="cameraStatus"></div>
    </div><!-- /footer -->
</div><!-- /page -->






<!-- Resultado -->
<div data-role="page" id="resultado" data-title="resultado">
            <div data-role="header" data-theme="b" >
                <h1>Resultado</h1>
</div>
    </div>
            </div>
            <div data-role="content" data-theme="b">
               
              
            </div>
           
        </div>

        <!-- fin subpaginas  -->


        <!--<script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
           // app.initialize();
        </script> -->
    </body>
</html>
